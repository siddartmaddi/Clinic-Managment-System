CREATE TABLE IF NOT EXISTS PATIENT(
	PATIENT_ID INTEGER PRIMARY KEY,
	PATIENT_NAME VARCHAR(80) NOT NULL,
	PATIENT_PNO BIGINT NOT NULL CHECK (PATIENT_PNO>=1000000000 AND PATIENT_PNO<=9999999999),
	PATIENT_ADDRESS VARCHAR(255) NOT NULL,
	PATIENT_EMAIL VARCHAR(80) NOT NULL,
	PATIENT_AGE INT NOT NULL
);
CREATE TABLE IF NOT EXISTS HEALTH_PROFFESIONAL(
	HP_ID INTEGER PRIMARY KEY,
	HP_NAME VARCHAR(80) NOT NULL,
	HP_PNO BIGINT NOT NULL CHECK (HP_PNO>=1000000000 AND HP_PNO<=9999999999),
	TITLE VARCHAR(80) NOT NULL
);

CREATE TABLE IF NOT EXISTS APPOINTMENT(
	APPOINTMENT_ID INTEGER PRIMARY KEY ,
	APPOINTMENT_DATE DATE NOT NULL,
	PATIENT_ID INTEGER REFERENCES PATIENT(PATIENT_ID) ON DELETE CASCADE,
	HP_ID INTEGER REFERENCES HEALTH_PROFFESIONAL(HP_ID) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS APP_HP (
	HP_ID INTEGER PRIMARY KEY,
	ROOM INTEGER NOT NULL
);
CREATE TABLE IF NOT EXISTS PRESCRIPTION(
	PRESCRIPTION_ID INTEGER PRIMARY KEY,
	PATIENT_ID INTEGER REFERENCES PATIENT(PATIENT_ID) ON DELETE CASCADE,
	APPOINTMENT_ID INTEGER REFERENCES APPOINTMENT(APPOINTMENT_ID) ON DELETE CASCADE,
	AMOUNT INTEGER NOT NULL,
	REMARKS VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS MEDICINE(
	MEDCODE INTEGER PRIMARY KEY,
	PRICE INTEGER NOT NULL,
	MAIN_INGREDIENT VARCHAR(80) NOT NULL
);

CREATE TABLE IF NOT EXISTS PRES_MED(
	PRESCRIPTION_ID INTEGER REFERENCES PRESCRIPTION(PRESCRIPTION_ID) ON DELETE CASCADE,
	MEDCODE INTEGER REFERENCES MEDICINE(MEDCODE) ON DELETE CASCADE,
	DOSAGE VARCHAR(80) NOT NULL,
	PRIMARY KEY(PRESCRIPTION_ID,MEDCODE)
);
CREATE TABLE IF NOT EXISTS MANUFACTURER(
	MANUFACTURER_ID INTEGER PRIMARY KEY,
	MANUFACTURER_NAME VARCHAR(80) NOT NULL,
	MANUFACTURER_ADDRESS VARCHAR(255) NOT NULL,
	MANUFACTURER_PNO BIGINT NOT NULL CHECK (MANUFACTURER_PNO >=1000000000 AND MANUFACTURER_PNO<=9999999999)
);
CREATE TABLE IF NOT EXISTS MED_MANU(
	MEDCODE INTEGER REFERENCES MEDICINE(MEDCODE) ON DELETE CASCADE,
	MANUFACTURER_ID INTEGER REFERENCES MANUFACTURER(MANUFACTURER_ID) ON DELETE CASCADE,
	PRIMARY KEY(MEDCODE,MANUFACTURER_ID)
);

INSERT INTO PATIENT VALUES(1,'sid',9619204960,'mumbai','sid@gmail.com',20);
INSERT INTO PATIENT VALUES(2,'maddi',9326260240,'kerala','maddi@gmail.com',20);

INSERT INTO MANUFACTURER VALUES(1,'praveen','bangalore',9110233201);
INSERT INTO MANUFACTURER VALUES(2,'kumar','kerala',8232301910);

INSERT INTO MEDICINE VALUES(100,50,'chlorine');
INSERT INTO MEDICINE VALUES(101,55,'iodine');
INSERT INTO MEDICINE VALUES(102,60,'magnesium');
INSERT INTO MEDICINE VALUES(103,70,'florine');
INSERT INTO MEDICINE VALUES(104,75,'magnesium');
INSERT INTO MEDICINE VALUES(105,80,'hydrogen');
INSERT INTO MEDICINE VALUES(106,90,'ins');
INSERT INTO MEDICINE VALUES(107,95,'calcium');

INSERT INTO HEALTH_PROFFESIONAL VALUES(1,'DR RAMESH',9020324010,'NEUROSURGEN');
INSERT INTO HEALTH_PROFFESIONAL VALUES(2,'DR AMO',8232017892,'PEDIATRICITION');
INSERT INTO HEALTH_PROFFESIONAL VALUES(3,'DR CHINT',9020324014,'OPTHAMOLAGIST');
INSERT INTO HEALTH_PROFFESIONAL VALUES(4,'DR Sandy',7020324014,'HOMIO');
INSERT INTO HEALTH_PROFFESIONAL VALUES(5,'DR Sivaraj',7320324014,'SURGEN');
INSERT INTO HEALTH_PROFFESIONAL VALUES(6,'DR RAM',9754324014,'ENT');


INSERT INTO MED_MANU VALUES(100,1);
INSERT INTO MED_MANU VALUES(101,2);
INSERT INTO MED_MANU VALUES(102,1);
INSERT INTO MED_MANU VALUES(103,2);
INSERT INTO MED_MANU VALUES(104,1);
INSERT INTO MED_MANU VALUES(105,2);
INSERT INTO MED_MANU VALUES(106,1);
INSERT INTO MED_MANU VALUES(107,2);

INSERT INTO APPOINTMENT VALUES(1,'2020-06-07',1,3);
INSERT INTO APPOINTMENT VALUES(2,'2020-06-08',1,4);
INSERT INTO APPOINTMENT VALUES(3,'2020-06-09',2,5);

INSERT INTO APP_HP VALUES(1,301);
INSERT INTO APP_HP VALUES(2,302);
INSERT INTO APP_HP VALUES(3,303);
INSERT INTO APP_HP VALUES(4,304);
INSERT INTO APP_HP VALUES(5,305);
INSERT INTO APP_HP VALUES(6,306);

INSERT INTO PRESCRIPTION VALUES(1,1,1,165,'GET WELL SOON');
INSERT INTO PRESCRIPTION VALUES(2,1,2,70,'LESS RISK');
INSERT INTO PRESCRIPTION VALUES(3,2,3,155,'MORE RISK');

-- PATIENT 1
INSERT INTO PRES_MED VALUES(1,100,'TWICE A DAY');
INSERT INTO PRES_MED VALUES(1,101,'ONCE A DAY');
INSERT INTO PRES_MED VALUES(1,102,'THRICE');
INSERT INTO PRES_MED VALUES(2,103,'TWICE');
-- PATIENT 2
INSERT INTO PRES_MED VALUES(3,104,'MORNING');
INSERT INTO PRES_MED VALUES(3,105,'AFTERNOON');
